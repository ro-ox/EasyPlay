<Window
    x:Class="EasyPlay.Helpers.CustomInputBox"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="CustomInputBox"
    Width="500"
    Height="280"
    AllowsTransparency="True"
    Background="Transparent"
    FlowDirection="RightToLeft"
    Icon="/Assets/Images/app-icon.ico"
    ResizeMode="NoResize"
    Topmost="True"
    WindowStartupLocation="CenterOwner"
    WindowStyle="None">

    <Window.Resources>
        <!--  Button Hover Animation  -->
        <Storyboard x:Key="ButtonHoverIn">
            <DoubleAnimation
                Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                To="1.05"
                Duration="0:0:0.2" />
            <DoubleAnimation
                Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                To="1.05"
                Duration="0:0:0.2" />
        </Storyboard>
        <Storyboard x:Key="ButtonHoverOut">
            <DoubleAnimation
                Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                To="1.0"
                Duration="0:0:0.2" />
            <DoubleAnimation
                Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                To="1.0"
                Duration="0:0:0.2" />
        </Storyboard>

        <!--  Primary Button Style  -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Border">
            <Setter Property="Background" Value="#b74545" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1" />
                </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#cf5252" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Secondary Button Style  -->
        <Style x:Key="SecondaryButtonStyle" TargetType="Border">
            <Setter Property="Background" Value="#2d2d2d" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1" />
                </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3d3d3d" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  TextBox Style  -->
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#2d2d2d" />
            <Setter Property="Foreground" Value="#e0e0e0" />
            <Setter Property="BorderBrush" Value="#b74545" />
            <Setter Property="BorderThickness" Value="0,0,0,2" />
            <Setter Property="Padding" Value="12,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontFamily" Value="Segoe UI" />
            <Setter Property="CaretBrush" Value="#b74545" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="6,6,0,0">
                            <Grid>
                                <!--  Placeholder Text  -->
                                <TextBlock
                                    x:Name="PlaceholderText"
                                    Padding="{TemplateBinding Padding}"
                                    VerticalAlignment="Center"
                                    FontSize="{TemplateBinding FontSize}"
                                    Foreground="#666666"
                                    IsHitTestVisible="False"
                                    Text="{TemplateBinding Tag}"
                                    Visibility="Collapsed" />

                                <ScrollViewer
                                    x:Name="PART_ContentHost"
                                    Padding="{TemplateBinding Padding}"
                                    VerticalAlignment="Center" />
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Text" Value="">
                                <Setter TargetName="PlaceholderText" Property="Visibility" Value="Visible" />
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="#cf5252" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border
        x:Name="MainBorder"
        Background="#1a1a1a"
        BorderBrush="#b74545"
        BorderThickness="1"
        CornerRadius="12"
        RenderTransformOrigin="0.5,0.5">
        <Border.RenderTransform>
            <ScaleTransform ScaleX="1" ScaleY="1" />
        </Border.RenderTransform>
        <Border.Effect>
            <DropShadowEffect
                BlurRadius="20"
                Opacity="0.3"
                ShadowDepth="0"
                Color="#45b7aa" />
        </Border.Effect>

        <Grid Margin="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="60" />
                <RowDefinition Height="*" />
                <RowDefinition Height="70" />
            </Grid.RowDefinitions>

            <!--  Header  -->
            <Border
                Grid.Row="0"
                Background="#252525"
                BorderBrush="#2d2d2d"
                BorderThickness="0,0,0,1"
                CornerRadius="12,12,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Icon  -->
                    <Border
                        x:Name="IconBorder"
                        Grid.Column="0"
                        Width="45"
                        Height="45"
                        Margin="15,0,12,0"
                        Background="#3d1f1f"
                        CornerRadius="10">
                        <TextBlock
                            x:Name="MessageIcon"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontFamily="{StaticResource AppFontAwesomeRegular}"
                            FontSize="22"
                            Foreground="#b74545"
                            Text="&#xf040;" />
                    </Border>

                    <!--  Title  -->
                    <TextBlock
                        x:Name="TitleText"
                        Grid.Column="1"
                        Margin="0,0,10,0"
                        VerticalAlignment="Center"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Foreground="#e0e0e0"
                        Text="ورودی" />

                    <!--  Character Counter  -->
                    <TextBlock
                        x:Name="CharCountText"
                        Grid.Column="2"
                        Margin="0,0,15,0"
                        VerticalAlignment="Center"
                        FontSize="12"
                        Foreground="#666666"
                        Text="0" />
                </Grid>
            </Border>

            <!--  Content  -->
            <Grid Grid.Row="1" Margin="25,20,25,15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="15" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="8" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Prompt Text  -->
                <TextBlock
                    x:Name="PromptText"
                    Grid.Row="0"
                    FontSize="13"
                    Foreground="#b0b0b0"
                    LineHeight="22"
                    Text="لطفاً متن خود را وارد کنید:"
                    TextWrapping="Wrap" />

                <!--  Input TextBox  -->
                <TextBox
                    x:Name="InputTextBox"
                    Grid.Row="2"
                    FontFamily="{StaticResource AppFont}"
                    KeyDown="InputTextBox_KeyDown"
                    MaxLength="100"
                    Style="{StaticResource ModernTextBoxStyle}"
                    Tag="متن خود را اینجا وارد کنید..."
                    TextChanged="InputTextBox_TextChanged" />

                <!--  Validation Message  -->
                <TextBlock
                    x:Name="ValidationText"
                    Grid.Row="4"
                    FontSize="11"
                    Foreground="#ff6b6b"
                    Visibility="Collapsed" />
            </Grid>

            <!--  Buttons  -->
            <Grid Grid.Row="2" Margin="25,0,25,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="10" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Primary Button (OK)  -->
                <Border
                    x:Name="PrimaryButton"
                    Grid.Column="0"
                    MouseEnter="Button_MouseEnter"
                    MouseLeave="Button_MouseLeave"
                    MouseLeftButtonDown="PrimaryButton_Click"
                    Style="{StaticResource PrimaryButtonStyle}">
                    <StackPanel
                        Margin="0,12"
                        HorizontalAlignment="Center"
                        Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,8,0"
                            VerticalAlignment="Center"
                            FontFamily="{StaticResource AppFontAwesomeRegular}"
                            FontSize="14"
                            Foreground="White"
                            Text="&#xf00c;" />
                        <TextBlock
                            x:Name="PrimaryButtonText"
                            VerticalAlignment="Center"
                            FontSize="14"
                            FontWeight="Medium"
                            Foreground="White"
                            Text="تایید" />
                    </StackPanel>
                </Border>

                <!--  Secondary Button (Cancel)  -->
                <Border
                    x:Name="SecondaryButton"
                    Grid.Column="2"
                    MouseEnter="Button_MouseEnter"
                    MouseLeave="Button_MouseLeave"
                    MouseLeftButtonDown="SecondaryButton_Click"
                    Style="{StaticResource SecondaryButtonStyle}">
                    <StackPanel
                        Margin="0,12"
                        HorizontalAlignment="Center"
                        Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,8,0"
                            VerticalAlignment="Center"
                            FontFamily="{StaticResource AppFontAwesomeRegular}"
                            FontSize="14"
                            Foreground="#b0b0b0"
                            Text="&#xf00d;" />
                        <TextBlock
                            x:Name="SecondaryButtonText"
                            VerticalAlignment="Center"
                            FontSize="14"
                            FontWeight="Medium"
                            Foreground="#b0b0b0"
                            Text="انصراف" />
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
